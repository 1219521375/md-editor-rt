import{i as ce,_ as S,a as A,b as z,c as $,r as f,s as ue,d as pe,e as V,f as q,t as he,g as O,h as D,j as de,k as R,l as P,o as ve,C as ee,m as te,n as ge,p as me,q as xe,v as Ce,R as L}from"./index.2d863257.js";var C=new Map;function ke(r){r.forEach(function(i){var t,e=i.target;(t=C.get(e))===null||t===void 0||t.forEach(function(n){return n(e)})})}var ne=new ce(ke);function ye(r,i){C.has(r)||(C.set(r,new Set),ne.observe(r)),C.get(r).add(i)}function Te(r,i){C.has(r)&&(C.get(r).delete(i),C.get(r).size||(ne.unobserve(r),C.delete(r)))}var Re=function(r){S(t,r);var i=A(t);function t(){return z(this,t),i.apply(this,arguments)}return $(t,[{key:"render",value:function(){return this.props.children}}]),t}(f.exports.Component),F=f.exports.createContext(null);function Ee(r){var i=r.children,t=r.onBatchResize,e=f.exports.useRef(0),n=f.exports.useRef([]),o=f.exports.useContext(F),a=f.exports.useCallback(function(s,l,u){e.current+=1;var p=e.current;n.current.push({size:s,element:l,data:u}),Promise.resolve().then(function(){p===e.current&&(t==null||t(n.current),n.current=[])}),o==null||o(s,l,u)},[t,o]);return f.exports.createElement(F.Provider,{value:a},i)}function we(r){var i=r.children,t=r.disabled,e=f.exports.useRef(null),n=f.exports.useRef(null),o=f.exports.useContext(F),a=typeof i=="function",s=a?i(e):i,l=f.exports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!a&&f.exports.isValidElement(s)&&ue(s),p=u?s.ref:null,d=f.exports.useMemo(function(){return pe(p,e)},[p,e]),c=f.exports.useRef(r);c.current=r;var v=f.exports.useCallback(function(h){var g=c.current,m=g.onResize,x=g.data,_=h.getBoundingClientRect(),E=_.width,w=_.height,y=h.offsetWidth,k=h.offsetHeight,H=Math.floor(E),W=Math.floor(w);if(l.current.width!==H||l.current.height!==W||l.current.offsetWidth!==y||l.current.offsetHeight!==k){var j={width:H,height:W,offsetWidth:y,offsetHeight:k};l.current=j;var le=y===Math.round(E)?E:y,fe=k===Math.round(w)?w:k,G=V(V({},j),{},{offsetWidth:le,offsetHeight:fe});o==null||o(G,h,x),m&&Promise.resolve().then(function(){m(G,h)})}},[]);return f.exports.useEffect(function(){var h=q(e.current)||q(n.current);return h&&!t&&ye(h,v),function(){return Te(h,v)}},[e.current,t]),f.exports.createElement(Re,{ref:n},u?f.exports.cloneElement(s,{ref:d}):s)}var Le="rc-observer-key";function M(r){var i=r.children,t=typeof i=="function"?[i]:he(i);return t.map(function(e,n){var o=(e==null?void 0:e.key)||"".concat(Le,"-").concat(n);return f.exports.createElement(we,O({},r,{key:o}),e)})}M.Collection=Ee;function b(r){return r!==window?r.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function K(r,i,t){if(t!==void 0&&i.top>r.top-t)return t+i.top}function X(r,i,t){if(t!==void 0&&i.bottom<r.bottom+t){var e=window.innerHeight-i.bottom;return t+e}}var re=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],N=[];function Y(r,i){if(!!r){var t=N.find(function(e){return e.target===r});t?t.affixList.push(i):(t={target:r,affixList:[i],eventHandlers:{}},N.push(t),re.forEach(function(e){t.eventHandlers[e]=D(r,e,function(){t.affixList.forEach(function(n){n.lazyUpdatePosition()})})}))}}function J(r){var i=N.find(function(t){var e=t.affixList.some(function(n){return n===r});return e&&(t.affixList=t.affixList.filter(function(n){return n!==r})),e});i&&i.affixList.length===0&&(N=N.filter(function(t){return t!==i}),re.forEach(function(t){var e=i.eventHandlers[t];e&&e.remove&&e.remove()}))}var oe=globalThis&&globalThis.__decorate||function(r,i,t,e){var n=arguments.length,o=n<3?i:e===null?e=Object.getOwnPropertyDescriptor(i,t):e,a;if((typeof Reflect=="undefined"?"undefined":de(Reflect))==="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,i,t,e);else for(var s=r.length-1;s>=0;s--)(a=r[s])&&(o=(n<3?a(o):n>3?a(i,t,o):a(i,t))||o);return n>3&&o&&Object.defineProperty(i,t,o),o};function Ne(){return typeof window!="undefined"?window:null}var T;(function(r){r[r.None=0]="None",r[r.Prepare=1]="Prepare"})(T||(T={}));var I=function(r){S(t,r);var i=A(t);function t(){var e;return z(this,t),e=i.apply(this,arguments),e.state={status:T.None,lastAffix:!1,prevTarget:null},e.getOffsetTop=function(){var n=e.props.offsetBottom,o=e.props.offsetTop;return n===void 0&&o===void 0&&(o=0),o},e.getOffsetBottom=function(){return e.props.offsetBottom},e.savePlaceholderNode=function(n){e.placeholderNode=n},e.saveFixedNode=function(n){e.fixedNode=n},e.measure=function(){var n=e.state,o=n.status,a=n.lastAffix,s=e.props.onChange,l=e.getTargetFunc();if(!(o!==T.Prepare||!e.fixedNode||!e.placeholderNode||!l)){var u=e.getOffsetTop(),p=e.getOffsetBottom(),d=l();if(!!d){var c={status:T.None},v=b(d),h=b(e.placeholderNode),g=K(h,v,u),m=X(h,v,p);g!==void 0?(c.affixStyle={position:"fixed",top:g,width:h.width,height:h.height},c.placeholderStyle={width:h.width,height:h.height}):m!==void 0&&(c.affixStyle={position:"fixed",bottom:m,width:h.width,height:h.height},c.placeholderStyle={width:h.width,height:h.height}),c.lastAffix=!!c.affixStyle,s&&a!==c.lastAffix&&s(c.lastAffix),e.setState(c)}}},e.prepareMeasure=function(){e.setState({status:T.Prepare,affixStyle:void 0,placeholderStyle:void 0})},e.render=function(){var n=e.context.getPrefixCls,o=e.state,a=o.affixStyle,s=o.placeholderStyle,l=e.props,u=l.prefixCls,p=l.children,d=R(P({},n("affix",u),!!a)),c=ve(e.props,["prefixCls","offsetTop","offsetBottom","target","onChange"]);return f.exports.createElement(M,{onResize:function(){e.updatePosition()}},f.exports.createElement("div",O({},c,{ref:e.savePlaceholderNode}),a&&f.exports.createElement("div",{style:s,"aria-hidden":"true"}),f.exports.createElement("div",{className:d,ref:e.saveFixedNode,style:a},f.exports.createElement(M,{onResize:function(){e.updatePosition()}},p))))},e}return $(t,[{key:"getTargetFunc",value:function(){var n=this.context.getTargetContainer,o=this.props.target;return o!==void 0?o:n||Ne}},{key:"componentDidMount",value:function(){var n=this,o=this.getTargetFunc();o&&(this.timeout=setTimeout(function(){Y(o(),n),n.updatePosition()}))}},{key:"componentDidUpdate",value:function(n){var o=this.state.prevTarget,a=this.getTargetFunc(),s=null;a&&(s=a()||null),o!==s&&(J(this),s&&(Y(s,this),this.updatePosition()),this.setState({prevTarget:s})),(n.offsetTop!==this.props.offsetTop||n.offsetBottom!==this.props.offsetBottom)&&this.updatePosition(),this.measure()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),J(this),this.updatePosition.cancel(),this.lazyUpdatePosition.cancel()}},{key:"updatePosition",value:function(){this.prepareMeasure()}},{key:"lazyUpdatePosition",value:function(){var n=this.getTargetFunc(),o=this.state.affixStyle;if(n&&o){var a=this.getOffsetTop(),s=this.getOffsetBottom(),l=n();if(l&&this.placeholderNode){var u=b(l),p=b(this.placeholderNode),d=K(p,u,a),c=X(p,u,s);if(d!==void 0&&o.top===d||c!==void 0&&o.bottom===c)return}}this.prepareMeasure()}}]),t}(f.exports.Component);I.contextType=ee;oe([te()],I.prototype,"updatePosition",null);oe([te()],I.prototype,"lazyUpdatePosition",null);var _e=I,be=f.exports.createContext(null),ie=be;function Pe(){return window}function Q(r,i){if(!r.getClientRects().length)return 0;var t=r.getBoundingClientRect();return t.width||t.height?i===window?(i=r.ownerDocument.documentElement,t.top-i.clientTop):t.top-i.getBoundingClientRect().top:t.top}var Z=/#(\S+)$/,B=function(r){S(t,r);var i=A(t);function t(){var e;return z(this,t),e=i.apply(this,arguments),e.state={activeLink:null},e.wrapperRef=f.exports.createRef(),e.links=[],e.registerLink=function(n){e.links.includes(n)||e.links.push(n)},e.unregisterLink=function(n){var o=e.links.indexOf(n);o!==-1&&e.links.splice(o,1)},e.getContainer=function(){var n=e.context.getTargetContainer,o=e.props.getContainer,a=o||n||Pe;return a()},e.handleScrollTo=function(n){var o=e.props,a=o.offsetTop,s=o.targetOffset;e.setCurrentActiveLink(n);var l=e.getContainer(),u=ge(l,!0),p=Z.exec(n);if(!!p){var d=document.getElementById(p[1]);if(!!d){var c=Q(d,l),v=u+c;v-=s!==void 0?s:a||0,e.animating=!0,me(v,{callback:function(){e.animating=!1},getContainer:e.getContainer})}}},e.saveInkNode=function(n){e.inkNode=n},e.setCurrentActiveLink=function(n){var o=e.state.activeLink,a=e.props.onChange;o!==n&&(e.setState({activeLink:n}),a==null||a(n))},e.handleScroll=function(){if(!e.animating){var n=e.props,o=n.offsetTop,a=n.bounds,s=n.targetOffset,l=e.getCurrentAnchor(s!==void 0?s:o||0,a);e.setCurrentActiveLink(l)}},e.updateInk=function(){var n=xe(e),o=n.prefixCls,a=n.wrapperRef,s=a.current,l=s==null?void 0:s.getElementsByClassName("".concat(o,"-link-title-active"))[0];l&&(e.inkNode.style.top="".concat(l.offsetTop+l.clientHeight/2-4.5,"px"))},e.render=function(){var n=e.context,o=n.getPrefixCls,a=n.direction,s=e.props,l=s.prefixCls,u=s.className,p=u===void 0?"":u,d=s.style,c=s.offsetTop,v=s.affix,h=s.showInkInFixed,g=s.children,m=e.state.activeLink,x=o("anchor",l);e.prefixCls=x;var _=R("".concat(x,"-ink-ball"),{visible:m}),E=R("".concat(x,"-wrapper"),P({},"".concat(x,"-rtl"),a==="rtl"),p),w=R(x,{fixed:!v&&!h}),y=O({maxHeight:c?"calc(100vh - ".concat(c,"px)"):"100vh"},d),k=f.exports.createElement("div",{ref:e.wrapperRef,className:E,style:y},f.exports.createElement("div",{className:w},f.exports.createElement("div",{className:"".concat(x,"-ink")},f.exports.createElement("span",{className:_,ref:e.saveInkNode})),g));return f.exports.createElement(ie.Provider,{value:{registerLink:e.registerLink,unregisterLink:e.unregisterLink,activeLink:e.state.activeLink,scrollTo:e.handleScrollTo,onClick:e.props.onClick}},v?f.exports.createElement(_e,{offsetTop:c,target:e.getContainer},k):k)},e}return $(t,[{key:"componentDidMount",value:function(){this.scrollContainer=this.getContainer(),this.scrollEvent=D(this.scrollContainer,"scroll",this.handleScroll),this.handleScroll()}},{key:"componentDidUpdate",value:function(){if(this.scrollEvent){var n=this.getContainer();this.scrollContainer!==n&&(this.scrollContainer=n,this.scrollEvent.remove(),this.scrollEvent=D(this.scrollContainer,"scroll",this.handleScroll),this.handleScroll())}this.updateInk()}},{key:"componentWillUnmount",value:function(){this.scrollEvent&&this.scrollEvent.remove()}},{key:"getCurrentAnchor",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,a=this.props.getCurrentAnchor;if(typeof a=="function")return a();var s=[],l=this.getContainer();if(this.links.forEach(function(p){var d=Z.exec(p.toString());if(!!d){var c=document.getElementById(d[1]);if(c){var v=Q(c,l);v<n+o&&s.push({link:p,top:v})}}}),s.length){var u=s.reduce(function(p,d){return d.top>p.top?d:p});return u.link}return""}}]),t}(f.exports.Component);B.defaultProps={affix:!0,showInkInFixed:!1};B.contextType=ee;var U=function(r){S(t,r);var i=A(t);function t(){var e;return z(this,t),e=i.apply(this,arguments),e.handleClick=function(n){var o=e.context,a=o.scrollTo,s=o.onClick,l=e.props,u=l.href,p=l.title;s==null||s(n,{title:p,href:u}),a(u)},e.renderAnchorLink=function(n){var o=n.getPrefixCls,a=e.props,s=a.prefixCls,l=a.href,u=a.title,p=a.children,d=a.className,c=a.target,v=o("anchor",s),h=e.context.activeLink===l,g=R("".concat(v,"-link"),P({},"".concat(v,"-link-active"),h),d),m=R("".concat(v,"-link-title"),P({},"".concat(v,"-link-title-active"),h));return f.exports.createElement("div",{className:g},f.exports.createElement("a",{className:m,href:l,title:typeof u=="string"?u:"",target:c,onClick:e.handleClick},u),p)},e}return $(t,[{key:"componentDidMount",value:function(){this.context.registerLink(this.props.href)}},{key:"componentDidUpdate",value:function(n){var o=n.href,a=this.props.href;o!==a&&(this.context.unregisterLink(o),this.context.registerLink(a))}},{key:"componentWillUnmount",value:function(){this.context.unregisterLink(this.props.href)}},{key:"render",value:function(){return f.exports.createElement(Ce,null,this.renderAnchorLink)}}]),t}(f.exports.Component);U.defaultProps={href:"#"};U.contextType=ie;var Se=U;B.Link=Se;var ae=B;const{Link:Ae}=ae,se=({tocItem:r})=>L.createElement(Ae,{href:`#${r.text}`,title:r.text},r.children&&L.createElement("div",{className:"catalog-container"},r.children.map(i=>L.createElement(se,{key:`${i.level}-${i.text}`,tocItem:i})))),ze=(r,i=100)=>{let t=-1;return()=>{clearTimeout(t),t=setTimeout(r,i)}},$e=ze(()=>{const r=decodeURIComponent(location.hash).replace("#","");if(r){const i=document.getElementById(r);if(i){const t=i.offsetTop+414;window.scrollTo({top:t,behavior:"smooth"})}}}),Ie=({heads:r})=>{const i=f.exports.useMemo(()=>{const t=[];return r.forEach(({text:e,level:n})=>{const o={level:n,text:e};if(t.length===0)t.push(o);else{let a=t[t.length-1];if(o.level>a.level)for(let s=a.level+1;s<=6;s++){const{children:l}=a;if(!l){a.children=[o];break}if(a=l[l.length-1],o.level<=a.level){l.push(o);break}}else t.push(o)}}),t},[r]);return f.exports.useEffect($e,[r]),L.createElement(ae,{affix:!1,showInkInFixed:!1},i.map(t=>L.createElement(se,{key:`${t.level}-${t.text}`,tocItem:t})))};var De=Ie;export{_e as A,De as C};
